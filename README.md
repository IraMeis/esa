# ESA
## Common
Предметная область - блюда и ингредиенты. Есть таблица 
с данными о блюде, таблица
с данными об ингредиенте, таблица связи + 
словарь (единица измерения ингредиента).

БД: Postgres 16  
Скрипты лежат в ./sql


Бд с небольшим количеством тестовых данных доступна 
в докере.  
`docker-compose -f docker-compose-db.yaml up`  
Перед запуском докер-компоса укажите валидные
пути в вашей системе.

## LR1 JavaEE
Ветка java-ee: 
`git checkout java-ee `

JakartaEE 10  
GlassFish Server 7  
Lombok

Конфиги преимущественно аннотациями.  

Data layer  
Все энтити наследуются либо от BaseLink либо
от BaseEntity (MappedSuperclass'ы). 
~~На репозиториях что-то пошло нет так, они без
общего родителя, хотя половина методов - копипаст.~~
Soft delete.

Business layer  
Сервисы - 2 шт. Сервис ингредиента работает 
только с ингредиентом, сервис блюда работает со 
всеми сущностями.   
Пара слов про логику сохранения
нового блюда: в блюдо сетятся параметры, после чего
оно сразу флашится, так как далее для сохранения в
таблице связи нужен айдишник блюда (подразумевается,
что ингредиенты берутся из заранее определенного списка,
их айдишники существуют). В конце в блюдо сетится
список ингредиентов для того, чтобы объект в памяти
пребывал в согласованном с бд состоянии.

View layer  
~~Контроллеры~~ Сервлеты, переводящие на jsp-страницы.
Есть рутовая страница, страница просмотра всех
ингредиентов, страница просмотра всех
блюд, страница создания блюда, страница создания
ингредиента, страница расширенного просмотра
данных по конкретному блюду.


